<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin — Sam Fedel Farms</title>
  <link rel="stylesheet" href="style.css">
  <link rel="canonical" href="https://sam-fedel.github.io/Sam-Fedel-Farms-Agricultural-Services-/admin.html" />
  <meta name="google-site-verification" content="7d8177cdda59d81f" />
  <script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>
  <style>
    body { padding: 28px; background: #050805; color: #eaf8ea; }
    .admin-wrap { max-width: 980px; margin: 0 auto; }
    h1 { margin-bottom: 8px; color: #bff1b0; }
    .tool-bar { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px; }
    .panel { background: rgba(0,0,0,0.35); padding:12px; border-radius:10px; margin-bottom:14px; }
    /* inventory styles removed */
    .small { font-size:0.9rem; color:#dff6d8; }
    .muted { color:#99bfa1; }
    .file-input { display:none; }
    a.back { color:#fff; text-decoration:none; background:#1f7a2c; padding:8px 12px; border-radius:8px; }
  </style>
</head>
<body>
  <div class="admin-wrap">
    <a class="back" href="index.html">← Back to site</a>
    <h1>Admin Panel — Sam Fedel Farms</h1>
    

    <div class="panel">
      <h2>Gallery — Featured Images</h2>
      <p class="small muted">Mark an image as featured; this is stored locally (key: <code>sf_gallery_meta</code>).</p>
      <div id="galleryGrid" class="gallery-grid" style="margin-top:12px;"></div>
    </div>

    <div class="panel small muted">
      <p>Notes: The admin page stores data in your browser. To move data between devices, use Export/Import JSON. If you want server-backed admin functionality, I can help implement it.</p>
    </div>
  </div>

<script>
// Admin inventory features removed per user request; gallery code follows
const GALLERY_META_KEY = 'sf_gallery_meta';
  // Broadcast channel (notify open pages in same origin)
  const bc = (typeof BroadcastChannel !== 'undefined') ? new BroadcastChannel('sf_admin_channel') : null;
  function broadcastGallery(meta){ try{ if(bc) bc.postMessage({ type: 'galleryUpdate', meta }); }catch(e){console.warn('broadcast failed', e);} }

// --- Gallery metadata (featured) ---
const galleryFiles = [
  'samfedel farms/IMG_20251114_172531_679.jpg',
  'samfedel farms/IMG_20251114_172536_933.jpg',
  'samfedel farms/IMG_20251114_172541_594.jpg',
  'samfedel farms/IMG_20251114_172647_624.jpg',
  'samfedel farms/IMG_20251114_172657_494.jpg',
  'samfedel farms/IMG_20251114_172707_937.jpg',
  'samfedel farms/IMG_20251114_172824_421.jpg',
  'samfedel farms/IMG_20251114_172826_811.jpg',
  'samfedel farms/IMG_20251114_172828_397.jpg',
  'samfedel farms/IMG_20251114_172830_876.jpg',
  'samfedel farms/IMG_20251114_172832_229.jpg',
  'samfedel farms/IMG_20251114_172833_366.jpg',
  'samfedel farms/IMG_20251114_173117_712.jpg',
  'samfedel farms/IMG_20251114_173117_766.jpg',
  'samfedel farms/IMG_20251114_173123_380.jpg',
  'samfedel farms/IMG_20251114_173127_579.jpg'
];

function loadGalleryMeta(){ try{ const raw = localStorage.getItem(GALLERY_META_KEY); return raw?JSON.parse(raw):{}; }catch(e){ return {}; } }
function saveGalleryMeta(m){ try{ localStorage.setItem(GALLERY_META_KEY, JSON.stringify(m)); broadcastGallery(m); }catch(e){ console.warn(e); } }

function renderGallery(){
  const grid = document.getElementById('galleryGrid'); if(!grid) return; grid.innerHTML=''; const meta = loadGalleryMeta();
  galleryFiles.forEach((f, i)=>{
    const wrap = document.createElement('div'); wrap.style.padding='6px'; wrap.style.display='inline-block'; wrap.style.width='180px'; wrap.style.verticalAlign='top';
    const img = document.createElement('img');
    img.setAttribute('data-src', encodeURI(f));
    img.classList.add('lozad');
    img.alt = 'gallery '+(i+1);
    img.style.width='100%'; img.style.borderRadius='10px'; img.style.border='2px solid rgba(255,255,255,0.04)';
    img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';
    const controls = document.createElement('div'); controls.style.marginTop='6px'; controls.style.display='flex'; controls.style.justifyContent='space-between';
    const label = document.createElement('label'); label.style.fontSize='0.9rem'; label.style.color='#dff6d8';
    const checkbox = document.createElement('input'); checkbox.type='checkbox'; checkbox.checked = !!meta[f]; checkbox.addEventListener('change', ()=>{ const m = loadGalleryMeta(); if(checkbox.checked) m[f]=true; else delete m[f]; saveGalleryMeta(m); renderGallery(); });
    label.appendChild(checkbox); label.append(' Featured');
    controls.appendChild(label);

    wrap.appendChild(img); wrap.appendChild(controls); grid.appendChild(wrap);
  });
}

// Init
document.addEventListener('DOMContentLoaded', ()=>{ 
  renderGallery();
  // init lozad for admin thumbnails
  if (typeof lozad !== 'undefined') {
    try {
      const adminLozad = lozad('.lozad', { loaded: el => el.classList.add('loaded') });
      adminLozad.observe();
      // trigger first few thumbnails
      setTimeout(()=>{
        const imgs = document.querySelectorAll('#galleryGrid img.lozad');
        for (let i=0;i<Math.min(4, imgs.length); i++) adminLozad.trigger(imgs[i]);
      }, 60);
    } catch(e) { console.warn('admin lozad init failed', e); }
  }
});

// GitHub publish helpers removed (inventory features disabled)

</script>
</body>
</html>